{"version":3,"sources":["scripts/main.js"],"names":["table","document","querySelector","addEventListener","headers","querySelectorAll","tableBody","directions","Array","from","map","header","transform","index","content","type","getAttribute","parseFloat","slice","forEach","call","direction","multiplier","rows","newRows","sort","rowA","rowB","cellA","innerHTML","cellB","a","b","row","removeChild","newRow","appendChild","sortColumn","newForm","createElement","className","selectedTr","body","tableNotification","info","push","title","p","innerText","setAttribute","append","setTimeout","remove","validateForm","x","value","length","ageF","y","clearForm","formatSalary","salary","Intl","NumberFormat","format","tr","event","target","closest","contains","classList","add","preventDefault","cols","q","tdNew","textContent","getElementById","area","editStart","td","innitualValue","cellIndex","onkeydown","key","blur","onblur","editEnd","replaceWith","focus"],"mappings":"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","file":"main.a6a3ad3e.js","sourceRoot":"../src","sourcesContent":["'use strict';\n\n// write code here\nconst table = document.querySelector('table');\n\ndocument.addEventListener('DOMContentLoaded', function() {\n  const headers = table.querySelectorAll('th');\n  const tableBody = table.querySelector('tbody');\n\n  const directions = Array.from(headers).map(function(header) {\n    return '';\n  });\n\n  const transform = function(index, content) {\n    const type = headers[index].getAttribute('data-type');\n\n    switch (type) {\n      case 'number':\n        return parseFloat(content.slice(1, -1));\n      case 'string':\n      default:\n        return content;\n    }\n  };\n\n  const sortColumn = function(index) {\n    const direction = directions[index] || 'asc';\n    const multiplier = (direction === 'asc') ? 1 : -1;\n\n    const rows = tableBody.querySelectorAll('tr');\n\n    const newRows = Array.from(rows);\n\n    newRows.sort(function(rowA, rowB) {\n      const cellA = rowA.querySelectorAll('td')[index].innerHTML;\n      const cellB = rowB.querySelectorAll('td')[index].innerHTML;\n\n      const a = transform(index, cellA);\n      const b = transform(index, cellB);\n\n      if (a > b) {\n        return 1 * multiplier;\n      } else if (a < b) {\n        return -1 * multiplier;\n      } else if (a === b) {\n        return 0;\n      }\n    });\n\n    [].forEach.call(rows, function(row) {\n      tableBody.removeChild(row);\n    });\n\n    directions[index] = direction === 'asc' ? 'desc' : 'asc';\n\n    newRows.forEach(function(newRow) {\n      tableBody.appendChild(newRow);\n    });\n  };\n\n  [].forEach.call(headers, function(header, index) {\n    header.addEventListener('click', function() {\n      sortColumn(index);\n    });\n  });\n});\n\nconst newForm = document.createElement('form');\n\nnewForm.className = 'new-employee-form';\n\nnewForm.innerHTML\n= `\n<label>Name:\n  <input\n    name=\"name\"\n    type=\"text\"\n    data-qa=\"name\"\n    required\n    id=\"name\"\n    value=\"\">\n</label>\n<label>Position:\n<input\nname=\"position\"\ntype=\"text\"\ndata-qa=\"position\"\nrequired\nid=\"position\"\nvalue=\"\">\n</label>\n<label>Office:\n  <select name=\"office\" required data-qa=\"office\" id=\"office\">\n    <option value=\"Tokyo\">Tokyo</option>\n    <option value=\"Singapore\">Singapore</option>\n    <option value=\"London\">London</option>\n    <option value=\"New York\">New York</option>\n    <option value=\"Edinburgh\">Edinburgh</option>\n    <option value=\"San Francisco\">San Francisco</option>\n  </select>\n</label>\n<label>Age:\n  <input\n    name=\"age\"\n    type=\"number\"\n    data-qa=\"age\"\n    required\n    id=\"age\"\n    value=\"\">\n  </label>\n<label>Salary:\n  <input\n    name=\"salary\"\n    type=\"number\"\n    data-qa=\"salary\"\n    required\n    id=\"salary\"\n    value=\"\">\n  </label>\n<button>Save to table</button>`;\n\nconst body = document.querySelector('body');\n\nbody.append(newForm);\n\nlet selectedTr;\n\ntable.addEventListener('click', function() {\n  const tr = event.target.closest('tr');\n\n  function highlight() {\n    if (selectedTr) {\n      selectedTr.classList.remove('active');\n    }\n    selectedTr = tr;\n    selectedTr.classList.add('active');\n  }\n\n  if (!tr) {\n    return;\n  }\n\n  if (!table.contains(tr)) {\n    return;\n  }\n\n  highlight(tr);\n});\n\nfunction tableNotification(info) {\n  const push = document.createElement('div');\n  const title = document.createElement('h2');\n  const p = document.createElement('p');\n\n  push.className = 'notification success';\n  title.className = 'title';\n  title.innerText = 'Sucess!';\n  p.innerText = 'You have changed employer data';\n  push.setAttribute('data-qa', 'notification');\n\n  if (!info) {\n    push.className = 'notification error';\n    title.className = 'title';\n    title.innerText = 'Error!';\n    p.innerText = 'Please, enter valid data';\n  }\n\n  push.append(title, p);\n  body.append(push);\n\n  setTimeout(() => {\n    push.remove();\n  }, 2000);\n}\n\nfunction validateForm() {\n  const nameF = document.querySelector('[data-qa=\"name\"]');\n  const x = nameF.value;\n\n  if (x.length < 4) {\n    return false;\n  }\n\n  const ageF = document.querySelector('[data-qa=\"age\"]');\n  const y = ageF.value;\n\n  if (y < 18) {\n    return false;\n  }\n\n  if (y > 90) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction clearForm() {\n  const nameF = document.querySelector('[data-qa=\"name\"]');\n\n  nameF.value = '';\n\n  const ageF = document.querySelector('[data-qa=\"age\"]');\n\n  ageF.value = '';\n\n  const positionF = document.querySelector('[data-qa=\"position\"]');\n\n  positionF.value = '';\n\n  const salaryF = document.querySelector('[data-qa=\"salary\"]');\n\n  salaryF.value = '';\n\n  const officeF = document.querySelector('[data-qa=\"office\"]');\n\n  officeF.value = 'Tokio';\n}\n\ndocument.querySelector('form').addEventListener('submit',\n  function() {\n    event.preventDefault();\n    tableNotification(validateForm());\n\n    if (validateForm()) {\n      const tr = document.createElement('tr');\n      const cols = ['name', 'position', 'office', 'age', 'salary'];\n\n      for (let q = 0; q < cols.length; ++q) {\n        const tdNew = document.createElement('td');\n\n        tdNew.textContent = document.getElementById(cols[q]).value;\n\n        if (cols[q] === 'salary') {\n          tdNew.textContent = formatSalary(\n            document.getElementById(cols[q]).value);\n        }\n\n        tr.appendChild(tdNew);\n      }\n\n      document.querySelector('tbody').appendChild(tr);\n    }\n\n    clearForm();\n  });\n\nfunction formatSalary(salary) {\n  return '$' + new Intl.NumberFormat('en-GB').format(salary);\n}\n\nlet area = null;\n\ntable.addEventListener('dblclick',\n  function() {\n    event.preventDefault();\n\n    const td = event.target.closest('td');\n\n    editStart(td);\n  });\n\nfunction editStart(td) {\n  const innitualValue = td.textContent;\n\n  if (td.cellIndex === 2) {\n    area = document.createElement('select');\n\n    area.innerHTML = `<option value=\"Tokyo\">Tokyo</option>\n    <option value=\"Singapore\">Singapore</option>\n    <option value=\"London\">London</option>\n    <option value=\"New York\">New York</option>\n    <option value=\"Edinburgh\">Edinburgh</option>\n    <option value=\"San Francisco\">San Francisco</option>`;\n  } else {\n    area = document.createElement('input');\n    area.value = '';\n  }\n  area.className = 'cell-input';\n\n  area.onkeydown = function() {\n    if (event.key === 'Enter') {\n      this.blur();\n    }\n  };\n\n  area.onblur = function() {\n    editEnd(td, area.value || innitualValue);\n  };\n\n  td.replaceWith(area);\n  area.focus();\n}\n\nfunction editEnd(td, value) {\n  td.innerHTML = value;\n  area.replaceWith(td);\n}\n"]}